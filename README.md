int state = 0; //状態管理のための変数



PImage photo;



  void setup() {
    println("-----");
    //println("現在のstateは" + state + "です。");
    println("「赤ずきん」の世界へようこそ。この物語はあなたの選択によって赤ずきんの運命が変わる11マルチエンディングゲームです。選択肢①ならキーボードの[1]を、選択肢②ならキーボードの[2]をおしてください。");
    println("※この物語はフィクションです。実在する人物、団体、事件等とは一切関係ありません。");
    println("-----");
    println("ゲームを開始するなら1を押してください");

    size(600, 400);
  }



  void draw()
  {
    photo = loadImage("IMG_7465.PNG");
    image(photo, 0, 0);
  }

  void keyPressed() {
    if (state == 0) {
      if (key == '1') {
        println("それではゲームを始めます。");
        state = 1;  //状態を1にする
        println("-----");
        //println("現在のstateは" + state + "です。");
        println("[A1]むかしむかし、あるところにかわいい女の子とお母さんがいました。お母さんはきれいなドレスをきて、家に帰るのは夜遅くだったので、赤ずきんはいつもさびしそうでした。");
        println("[A1]しかしある日、お母さんは女の子に赤い頭巾を作ってあげました。女の子はよろこび、その頭巾姿が似合っていたので、赤ずきんと呼ばれるようになりました。");
        println("[A1]「赤ずきん、おばあちゃんの具合が悪いみたいだからお見舞いに行ってちょうだい。外が冷えないうちに出かけなさい。おいしいワインとケーキを持っていっておいき。");
        println("[A1]絶対に寄り道はしてはいけませんよ。オオカミに気をつけなさい。」赤ずきんはおばあちゃんの家に行ったことがありません。そして森には怖い人食いオオカミもいます。");
        println("[A1]-----");
        println("[A1]①[まっすぐ、おばあさんのところへいく]②[隣町の薬屋にいく])");
      } else {
        println("-----");
        println("スタートをするなら1を押してください。");
      }
    } else if (state == 1) {
      if (key == '1') {
        state = 2;  //状態を2にする
        println("-----");
        //println("現在のstateは" + state + "です。");
        println("[A1]「わかったわ、気をつけるようにします。」そういって赤ずきんはおばあさんの家へ向かいました。");
        println("[A2]赤ずきんが森に入ったちょうどそのとき、オオカミに会いました。町のみんなが怖がるオオカミを赤ずきんは悪い人には見えなかったので、まったく怖がりませんでした。オオカミは言いました。「こんにちは、お嬢ちゃん。」");
        println("[A2]「ご親切にありがとう、オオカミさん。」「こんな早くにどこへ行くんだい。」");
        println("[A2]-----");
        println("[A2]①[行き先をおしえる]②[行き先をおしえない]");
      } else {
        state = 8;  //状態を8にする
        println("-----");
        //println("現在のstateは" + state + "です。");
        println("[B1]赤ずきんは「でもそれだけでは心配だわ。」といいました。お母さんは赤ずきんが隣町に行ったことがないことを心配して引き止めましたが、とうとう行ってしまいました。");
        println("[B1]赤ずきんは隣町へ着きましたが、あんのじょう歩いているとすぐに道がわからなくなってしまいました。");
        println("[B1]しばらく歩いていると「何かお困りごとかね、お嬢さん。」と腰を曲げたおじいさんがたずねました。「薬屋を探してるの。」するとおじいさんは「私が案内をしてあげよう。」といいました。");
        println("[B1]①[おじいさんについていく]②[一人でさがす]");
      }
    } else if (state ==8) {
      if (key == '1') {
        state = 0;  //状態を0にする
        println("-----");
        //println("現在のstateは" + state + "です。 ");
        println("[B2]「とてもお優しいのね。ぜひ案内していただきたいわ。」赤ずきんがそう言うと、おじいさんは手招くように歩きはじめました。");
        println("[B2]薄暗く、狭い路地に入っていったそのとき、後頭部に激痛が走りました。 突然のことで声を上げることもできません。耳鳴りとぼやける視界の中で「君で5人目だよ、赤頭巾のお嬢ちゃん。」ときこえました。");
        println("[B2]赤ずきんは町から消えて、姿を見たものは誰もいません。");
        println("-BルートEND-(はじめからゲームを開始するときは1をおしてください)");
      } else {
        println("-----");
        println("[B'1]「ご親切にありがとう。でもこの町は知らないことばかりだから、知るためにも少し歩いてみるわ。」");
        println("[B'1]「とても真面目なお嬢さんだね。外が暗くなるまえには帰るんだよ。ではまたどこかで。」そういっておじいさんはとぼとぼと去っていきました。");
        println("[B'1]そのあとも赤ずきんは薬屋をさがしましたが、やっぱり見つかりません。外が暗くなるまえにつかなければいけないので、赤ずきんはあきらめておばあさんの家にいきました。");
        println("[B'1]おばあさんの家につくと約束どおりケーキとワインを届け、おばあさんとのひと時を楽しみました。すると「トントン」とドアを叩く音がしました。");
        println("[B'1]「わたしがでるわ。」赤ずきんがドアを開けるとそこには、隣町でたずねてきたおじいさんがぴんとして立っていました。");
        println("-[B'ルートEND-(はじめからゲームを開始するときは1をおしてください)");
      }
    } else if (state == 2) {
      if (key == '1') {
        state = 3;  //状態を3にする
        println("-----");
        //println("現在のstateは" + state + "です。 ");
        println("[A2]「おばあさんのところに行くの。ここからだいたい15分くらい歩いたところ。おばあさんのお家は3本の大きなカシの木の下にあるの。きっとわかるわ。」と答えました。");
        println("[A3]「よくわかったよ。ところで赤ずきんちゃん、このあたりの花はなんてきれいなんだろうね。君は歩くことに夢中できいていないみたいだね。森の中は何でも楽しいことばかりなのに。」");
        println("[A3]つづけてオオカミは「おばあさんに摘んだばかりの花束を持って行けば、きっと喜んでくれる。まだ早いからちゃんとそこに着くよ。」と赤ずきんに言いました。");
        println("[A3]-----");
        println("[A3]①[言われたとおり、お花を摘みに行く]②[まっすぐおばあさんの家へ向かう]");
      } else {
        state = 7;  //状態を7にする
        println("-----");
        //println("現在のstateは" + state + "です。");
        println("[C1]「ごめんなさいオオカミさん、本当なら誰とも会わないようお母さんに言われているの。だから行き先は教えられないわ。」");
        println("[C1]「君はとてもかしこくてやさしい子なんだね。オレにはそういったアタマはないけど、この森のことなら誰よりも知っているんだ。この森はオレなんかよりも怖い動物がたくさんいるんだ。");
        println("[C1]「そのせいでこのあたりだとオオカミはオレひとりになってしまった。どうだいお嬢ちゃん、」");
        println("[C1]「もしオレに行き先を教えてくれるなら、安全な道を教えてあげれるよ」");
        println("[C1]①[行き先を教える]②[うその行き先をおしえる]");
      }
    } else if (state ==7) {
      if (key == '1') {
        state = 0;  //状態を0にする
        println("-----");
        //println("現在のstateは" + state + "です。 ");
        println("[C2]「わかったわ。あなたはほかのオオカミとちがってやさしそうだもの。ここから30分ほど歩いたところにあるおばあさんの家に行きたいの。」");
        println("[C2]「そうかい。ならとっておきの道があるよ。」そういってオオカミはわかりやすく赤ずきんにその道をおしえました。");
        println("[C2]赤ずきんはオオカミに言われたとおりの道を歩きました。しかし歩いても歩いてもなかなか着きません。そして1時間ほど歩いたところで、あることに気づきました。");
        println("[C2]なんと赤ずきんは森を抜けて、さいしょにオオカミと出会ったところに戻ってしまったのです。赤ずきんはいじわるされたことに悲しくなってそのまま自分の家に帰ってしまいました。");
        println("[C2]お母さんは帰ってきた赤ずきんを叱ろうとはせず、やさしく抱いてやりました。しかし後日お母さんがおばあちゃんの家に行くと、そこにおばあちゃんはいなかったといいます。");
        println("[C2]①[-CルートEND-(はじめからゲームを開始するときは1をおしてください)");
      } else {
        state = 0;
        println("-----");
        //println("現在のstateは" + state + "です。");
        println("[C'1]「お父さんの仕事場よ。お父さんは猟師で、たまにこの森に入るの。あなたはいいオオカミだから殺されることはないだろうけど、あまり関わらない方がいいとおもうの。");
        println("[C'1]「そうだったのか。きみとはともだちになりたかったけど、それは父親にも申し訳ない。またどこかで会えることを祈っているよ。」そういってオオカミは森の中へ去っていきました。");
        println("[C'1]赤ずきんは申し訳ないことをしたと思いつつ、おばあさんの家にいきました。約束どおりケーキとワインを届け、おばあさんとのひと時を楽しみました。");
        println("-C'ルートEND-(はじめからゲームを開始するときは1をおしてください)");
      }
    } else if (state ==3) {
      if (key == '1') {
        state = 4;  //状態を4にする
        println("-----");
        //println("現在のstateは" + state + "です。 ");
        println("[A3]ありがとうオオカミさん。とてもステキな考えね。赤ずきんは一本摘むと、もっと向こうにもっときれいな花があるように見えてそのあとを追いかけ、だんだん森の奥へ入って行きました。");
        println("[A4]たくさん集めてもう持てなくなるとおばあさんのことを思い出し、いそいでおばあさんの家へ向かいました。赤ずきんは家の戸が開いたままになっているのに驚き、部屋に入ると、とても変な気分になったので、「まあ、今日はとても不安な気持ちだわ。いつもだとおばあさんが待っててくれるのに。」と思いました。");
        println("[A4]-----");
        println("[A4]①[おばあさんのいる部屋に行く]②[家の周りを調べてみる]");
      } else {
        state = 0;  //状態を0にする
        println("-----");
        println("[D1]「ごめんなさいオオカミさん。とてもステキな考えだけど、あまり遅くなっておばあさんに会えば、寄り道をしたのかと叱られてしまうわ。」");
        println("-----");
        //println("現在のstateは" + state + "です。");
        println("[D1]「そうかい、おばあさんはきっとお嬢ちゃんが心配なんだね。会ってその顔をよく見せておやりなさい。」そう言うとオオカミは少ししっぽを揺らして森の中に消えて行きました。");
        println("[D1]おばあさんの家についた赤ずきんは持ってきたケーキとワインで楽しいひと時を過ごしました。このときはまだ、オオカミに2人とも食い殺されてしまうことは思いもしなかったでしょう。");
        println("-DルートEND-(はじめからゲームを開始するときは1をおしてください。）");
      }
    } else if (state ==4) {
      if (key =='1') {
        state = 5;  //状態を5にする
        println("-----");
        //println("現在のstateは" + state + "です。 ");
        println("[A4]「おはようございます。」と呼びましたが返事がありません。それで赤ずきんはベッドに行くと、そこには顔まで深々と帽子をかぶったおばあさんがいました。");
        println("[A5]赤ずきんは布団をめくると、目が合いました。その目は、優しいおばあさんの瞳ではなく...獣のような鋭い目。それだけではありません。とんがった大きな耳に全身けむくじゃら。");
        println("[A5]なんと、ベットに居たのはおばあちゃんではなくオオカミだったのです。次の瞬間、ニンマリと笑いながら涎を垂らしたオオカミが赤ずきんを襲ってくるではありませんか。");
        println("[A5]赤ずきんは、あまりにも怖くて声が出せません。とっさに目を瞑って蹲りました。暫くしてから、赤ずきんちゃんは目を開きました。すると、一面に広がっていたのは不規則に波打ったピンクの壁。");
        println("[A5]そう、赤ずきんはオオカミに丸呑みにされてしまったのです。そしてオオカミは近くにあったケーキとワインもたらげてしまいました。");
        println("[A5]オオカミは食べ終わると、またベッドに寝て、眠りこみ、とても大きないびきをかき始めました。オオカミのお腹の中は窮屈で、赤ずきんはうまく呼吸ができません。しかし眠っているあいだに助かる方法を見つけなければないません。");
        println("[A5]-----");
        println("[A5]①[お腹をけってオオカミを苦しませる]②[体力を使わず、助かる方法が考えつくまでじっとしてる]");
      } else {
        state = 10;  //状態を10にする
        println("-----");
        //println("現在のstateは" + state + "です。");
        println("[E1]赤ずきんは怖くなっておばあさんの家に何か異変はないかとあたりをみまわしました。すると赤ずきんは暖炉にくべる薪をみて、幼い頃にみた手斧があることを思い出しました。");
        println("[E1]①[手斧を拾う]②[手斧を拾わない]");
      }
    } else if (state ==10) {
      if (key == '1') {
        state = 10;  //状態を10にする
        println("-----");
        //println("現在のstateは" + state + "です。 ");
        println("[E2]「おはようございます。」と呼びましたが返事がありません。それで赤ずきんはベッドに行くと、そこには顔まで深々と帽子をかぶったおばあさんがいました。");
        println("[E2]「まあ、おばあさん、とても耳が大きいわ。」と赤ずきんは言いました。「お前の声がよく聞こえるようにだよ。」と返事。「だけど、おばあさん、とても手が大きいわ。」「お前をよく抱けるようにだよ。」");
        println("[E2]「だけど、おばあさん、おそろしく大きな口よ。」「お前をよく食えるようにだよ。」そうオオカミが言わないうちに大きな口をあけ、赤ずきんを丸呑みにしようとしました。");
        println("[E2]赤ずきんはとっさに持っていた手斧をオオカミの口に投げ入れると、口を閉じる力で自分の口を切り裂きました。");
        println("[E2]オオカミがもだえているあいだに赤ずきんは家を飛び出し、なんとか森を抜けることができました。赤ずきんは助かったものの、おばあさんがどうなったかは誰も知りません。");
        println("[E2]-----");
        println("-EルートEND-(はじめからゲームを開始するときは1をおしてください。）");
      } else {
        state = 0;  //状態を0にする
        println("-----");
        //println("現在のstateは" + state + "です。");
        println("[E'1]「おはようございます。」と呼びましたが返事がありません。それで赤ずきんはベッドに行くと、そこには顔まで深々と帽子をかぶったおばあさんがいました。");
        println("[E'1]「まあ、おばあさん、とても耳が大きいわ。」と赤ずきんは言いました。「お前の声がよく聞こえるようにだよ。」と返事。「だけど、おばあさん、とても手が大きいわ。」「お前をよく抱けるようにだよ。」");
        println("[E'1]「あなた、おばあさんじゃないわね！」と赤ずきんは叫び、いそいで逃げようとしましたが、オオカミは抵抗する赤ずきんを「がぶり」とひとかみで食い殺してしまいました。");
        println("-E'ルートEND-(はじめからゲームを開始するときは1をおしてください。）");
      }
    } else if (state ==5) {
      if (key == '1') {
        state = 6;  //状態を6にする
        println("-----");
        //println("現在のstateは" + state + "です。 ");
        println("[A6]じっとしていると、かすかに人の声がきこえます。ちょうどそこに狩にでていた猟師がおばあさんの家をたずねてきたのです。");
        println("[A6]それで猟師は部屋に入り、ベッドに来てみると狼が寝ているのが見えました。「お前をここで見つけるとは。」それから狙って撃とうとしたとき、オオカミのお腹が「ボン！」と膨らみました。");
        println("[A6]赤ずきんがオオカミのお腹を思い切りけりつけたのです。");
        println("[A6]猟師があわてて撃つのをやめ、すぐにおばあさんがいなくなっていたことを思い出しました。するとはさみをもってきて眠っているオオカミの腹を切り開き始めました。すると小さな女の子が飛び出て、そのあと、おばあさんも出てきました。");
        println("[A6]赤ずきんとおばあさんは抱き合ってよろこびました。すると赤ずきんはお母さんに作ってもらった大事な赤い頭巾がオオカミのお腹に取り残されていることに気づきました。");
        println("[A6]①[拾いに行く]②[拾わない]");
      }
    } else if (state == 6) {
      if (key == '1') {
        state = 7;  //状態を7にする
        println("-----");
        //println("現在のstateは" + state + "です。");
        println("[A7]赤ずきんは安心とどうじに恐ろしくなってしまい、猟師にお礼をいってから森を抜け、その猟師もけものの毛皮を剥いで持って帰りました。そして「これから森に入るときはお母さんの言いつけをちゃんと守らなければいけないわ」と赤ずきんは思いました。");
        println("-AルートEND-(はじめからゲームを開始するときは1をおしてください。）");
      } else {
        state = 0;  //状態をにする
        println("-----");
        //println("現在のstateは" + state + "です。");
        println("[G1]赤ずきんは勇気をだしてもう一度オオカミのお腹に入り、なんとか赤い頭巾を取り出しました。取り出したかと思うと赤ずきんは安心して、それをかぶりました。");
        println("[G1]すると猟師はなぜか赤ずきんをみておそろしいものみたような顔をしてからこういいました。「もしかして君は、赤ずきんかい？」");
        println("[G1]赤ずきんは驚いた顔をしてからうなづくと、猟師は赤ずきんの母親のことをきかされました。赤ずきんの家は薬屋で、たくさんの害獣を殺す薬をつくっていたのです。");
        println("[G1]猟師は自分の仕事がなくなり、赤ずきんの母親を憎んでいました。そして赤ずきんはオオカミよりも怖いものが何かを知りました。赤ずきんは「家には帰らない」といい、おばあさんの家に住むことになりました。");
        println("[G1]-GルートEND-(はじめからゲームを開始するときは1をおしてください。）");
      }
      println("-----");
      println("ゲームクリアです。スタートに戻るなら1を押してください。");
    } else {
      state = 4;  //状態を4にする
      println("-----");
      println("[F1]じっとしていると、かすかに人の声がきこえます。ちょうどそこに狩にでていた猟師がおばあさんの家をたずねてきたのです。");
      println("[F1]オオカミはびっくりしてベッドから飛び起きると、猟師はびっくりして持っていた猟銃でおばあさんと赤ずきんごと撃ち抜いてしまいました。");
      println("-FルートEND-(はじめからゲームを開始するときは1をおしてください。)");
    }
  }
